(function(t){function e(e){for(var o,s,a=e[0],c=e[1],u=e[2],h=0,p=[];h<a.length;h++)s=a[h],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);l&&l(e);while(p.length)p.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,a=1;a<n.length;a++){var c=n[a];0!==r[c]&&(o=!1)}o&&(i.splice(e--,1),t=s(s.s=n[0]))}return t}var o={},r={app:0},i=[];function s(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=o,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var o=n("3ebb"),r=n.n(o);r.a},"2aa9":function(t,e,n){var o=n("24fb");e=o(!1),e.push([t.i,".vue-scratchable-wrapper[data-v-3e2472f5]{position:relative}.vue-scratchable-wrapper>*[data-v-3e2472f5]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}canvas[data-v-3e2472f5]{position:absolute;top:0;left:0}",""]),t.exports=e},"3c2c":function(t,e,n){var o=n("2aa9");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=n("499e").default;r("da659f5e",o,!0,{sourceMap:!1,shadowMode:!1})},"3ebb":function(t,e,n){var o=n("e31a");"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=n("499e").default;r("517436b3",o,!0,{sourceMap:!1,shadowMode:!1})},"4c94":function(t,e,n){t.exports=n.p+"img/natural-paper-texture.f5055e3b.jpg"},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("h1",[t._v("A beautiful parrot got trapped behind some paper.")]),o("h2",[t._v("Scratch them free!")]),o("vue-scratchable",{attrs:{brushOptions:t.brush,hideOptions:t.hide,getPercentageCleared:""},on:{percentageUpdate:t.updatePoints},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.init;return[o("div",{staticClass:"wrapper"},[o("img",{attrs:{src:n("9327")},on:{load:function(t){return r()}}}),o("h3",[t._v(t._s(t.subline))])])]}}])}),o("p",[t._v("You scratched "+t._s(t.percentage)+"% free.")]),t._m(0)],1)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("pre",[t._v("Photo by "),n("a",{attrs:{href:"https://unsplash.com/@tkirkgoz?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText"}},[t._v("Mehmet Turgut Kirkgoz")]),t._v(" on "),n("a",{attrs:{href:"https://unsplash.com/t/animals?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText"}},[t._v("Unsplash")])])}],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vue-scratchable-wrapper"},[t._t("default",null,{init:t.init}),n("canvas",{on:{mousedown:t.mouseDown,mousemove:t.mouseMove,touchstart:t.touchDown,touchmove:t.touchMove}})],2)},a=[],c=(n("99af"),n("7db0"),n("4160"),n("b0c0"),n("a9e3"),n("d3b7"),n("38cf"),n("159b"),n("3835")),u=(n("96cf"),n("1da1")),l=n("b047"),h=n.n(l),p={name:"VueScratchable",props:{brushOptions:{type:Object,default:function(){return{size:20,shape:"round"}}},hideOptions:{type:Object,default:function(){return{type:"color",value:"#dadada"}}},getPercentageCleared:{type:Boolean,default:!1},percentageStride:{type:Number,default:150}},data:function(){return{canvas:null,context:null,isPressed:!1,offset:{top:0,left:0},position:{currX:0,currY:0,lastX:0,lastY:0},observer:null,slotDomElement:null}},mounted:function(){var t=this;this.canvas=this.$el.querySelector("canvas");var e=this.$scopedSlots.default()[0].context;this.slotDomElement=e.$children.find((function(e){return e._uid===t._uid})).$el,this.observer=new MutationObserver((function(e){e.forEach((function(e){var n=e.attributeName;"style"!==n&&h()(t.init,500)}))})),this.observer.observe(this.slotDomElement,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),window.addEventListener("mouseup",this.mouseUp,!1),window.addEventListener("touchend",this.touchUp,!1),window.addEventListener("touchcancel",this.touchUp,!1),this.init(),window.addEventListener("resize",h()(this.init,500))},destroyed:function(){window.removeEventListener("mouseup",this.mouseUp),window.removeEventListener("touchend",this.touchUp),window.removeEventListener("touchcancel",this.touchUp),window.removeEventListener("resize",h()(this.init,500)),this.observer.disconnect()},methods:{init:function(){var t=this;this.setCanvasSizeAndContext(),this.$nextTick((function(){return t.fillArea()}))},setCanvasSizeAndContext:function(){var t=this;this.$nextTick((function(){var e=t.slotDomElement.getBoundingClientRect(),n=e.width,o=e.height;t.canvas.width=Math.ceil(n),t.canvas.height=Math.ceil(o),t.context=t.canvas.getContext("2d")}))},setOffsets:function(){var t=this.canvas.getBoundingClientRect(),e=t.top,n=t.left;this.offset.top=e+document.body.scrollTop,this.offset.left=n+document.body.scrollLeft},fillArea:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var n,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.context.canvas,o=n.width,r=n.height,e.next=3,t.setFillStyle().catch((function(t){console.error(" Failed to load image!\n            Error: ".concat(t.name,"\n            Message: ").concat(t.message,"\n          "))}));case 3:t.context.fillRect(0,0,o,r);case 4:case"end":return e.stop()}}),e)})))()},setFillStyle:function(){var t=this,e=this.hideOptions,n=e.type,o=e.value,r=void 0===o?"":o,i=e.src,s=void 0===i?"":i,a=e.repeat,c=void 0===a?"":a;return this.context.globalCompositeOperation="source-over",new Promise("color"===n?function(e){return e(t.context.fillStyle=r)}:function(e,n){var o=new Image;o.onload=function(){t.context.fillStyle=t.context.createPattern(o,c),e(o)},o.onerror=function(t){return n(t)},o.src=s})},clearArea:function(){var t=this.context.canvas,e=t.width,n=t.height;this.context.globalCompositeOperation="destination-out",this.context.fillRect(0,0,e,n)},draw:function(){var t=this.position,e=t.currX,n=t.currY,o=t.lastX,r=t.lastY;this.context.beginPath(),this.context.globalCompositeOperation="destination-out",this.context.lineWidth=this.brushOptions.size,this.context.lineJoin=this.brushOptions.shape,this.context.moveTo(o,r),this.isPressed?this.context.lineTo(e,n):this.context.lineTo(e+.01,n+.01),this.context.closePath(),this.context.stroke(),this.lastPositionHelper(e,n),this.calculateClearedArea()},lastPositionHelper:function(t,e){this.position.lastX=t,this.position.lastY=e},currentPositionHelper:function(t,e){this.position.currX=t-this.offset.left,this.position.currY=e-this.offset.top},mouseDown:function(t){var e=t.clientX,n=t.clientY;this.setOffsets(),this.currentPositionHelper(e,n),this.lastPositionHelper(this.position.currX,this.position.currY),this.draw(),this.isPressed=!0},mouseMove:function(t){var e=t.clientX,n=t.clientY;this.isPressed&&(this.currentPositionHelper(e,n),this.draw())},mouseUp:function(){this.isPressed=!1},touchDown:function(t){var e=Object(c["a"])(t.targetTouches,1),n=e[0],o=n.clientX,r=n.clientY;this.setOffsets(),this.currentPositionHelper(o,r),this.lastPositionHelper(this.position.currX,this.position.currY),this.draw(),this.isPressed=!0},touchMove:function(t){t.preventDefault();var e=Object(c["a"])(t.targetTouches,1),n=e[0],o=n.clientX,r=n.clientY;this.currentPositionHelper(o,r),this.draw()},touchUp:function(){this.isPressed=!1},calculateClearedArea:function(){if(this.getPercentageCleared){for(var t=this.context.canvas,e=t.width,n=t.height,o=this.context.getImageData(0,0,e,n),r=o.data,i=o.data.length,s=i/this.percentageStride,a=0,c=a;c<i;c+=this.percentageStride)0===parseInt(r[c],10)&&(a+=1);this.$emit("percentageUpdate",Math.round(a/s*100))}}}},f=p,d=(n("6945"),n("2877")),v=Object(d["a"])(f,s,a,!1,null,"3e2472f5",null),m=v.exports,b=n("4c94"),g=n.n(b),w={name:"App",components:{VueScratchable:m},computed:{subline:function(){return this.percentage<100?"ðŸŽ‰ There is still ".concat(100-this.percentage,"% left for me to be free... ðŸŽ‰"):"ðŸ’š Thank you for scratching me free! ðŸ’š"}},data:function(){return{percentage:0,hide:{type:"pattern",src:g.a,repeat:"repeat"},brush:{size:60,shape:"round"}}},methods:{updatePoints:function(t){this.percentage=t}}},x=w,y=(n("034f"),Object(d["a"])(x,r,i,!1,null,null,null)),P=y.exports;o["a"].config.productionTip=!1,new o["a"]({render:function(t){return t(P)}}).$mount("#app")},6945:function(t,e,n){"use strict";var o=n("3c2c"),r=n.n(o);r.a},9327:function(t,e,n){t.exports=n.p+"img/mehmet-turgut-kirkgoz-vnayhPykN5Q-unsplash.a30fbc11.jpg"},e31a:function(t,e,n){var o=n("24fb");e=o(!1),e.push([t.i,"body{background-color:#333;margin:0}#app{font-family:Open Sans,sans-serif;color:#fff;display:flex;flex-direction:column;align-items:center;max-width:1200px;margin:0 auto;margin-top:50px}.vue-scratchable-wrapper{background-color:#fff}h3{color:#2c3e50;text-align:center}a{color:#2196f3}",""]),t.exports=e}});
//# sourceMappingURL=app.1c9189e3.js.map